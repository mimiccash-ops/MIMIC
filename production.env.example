# =============================================================================
# BRAIN CAPITAL - PRODUCTION ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!
#
# SECURITY BEST PRACTICES:
# - Use Docker Secrets for BRAIN_CAPITAL_MASTER_KEY in production
# - Generate all keys using cryptographically secure methods
# - Rotate keys periodically
# =============================================================================

# ==================== REQUIRED ====================

# Flask environment mode (MUST be 'production' for production deployment)
FLASK_ENV=production

# Secret key for Flask sessions
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
FLASK_SECRET_KEY=your-very-long-random-secret-key-here-at-least-32-chars

# ==================== ENCRYPTION KEY ====================
# SECURITY HARDENED: In production, use Docker Secrets instead of env vars!
#
# Option 1 (RECOMMENDED): Docker Secret
#   Create file: ./secrets/master.key with your Fernet key
#   The app will read from /run/secrets/brain_capital_master_key
#
# Option 2: Secure file path
#   Create: /etc/brain_capital/master.key
#   chmod 600 /etc/brain_capital/master.key
#
# Option 3 (NOT RECOMMENDED for production): Environment variable
# BRAIN_CAPITAL_MASTER_KEY=your-fernet-key-here
#
# Generate Fernet key: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"

# ==================== BINANCE API ====================
# Your Binance Futures API credentials for the master account
BINANCE_MASTER_API_KEY=your-binance-api-key
BINANCE_MASTER_API_SECRET=your-binance-api-secret

# ==================== WEBHOOK ====================
# Secret passphrase for TradingView webhooks
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
WEBHOOK_PASSPHRASE=your-webhook-secret-passphrase-32-chars-or-more

# ==================== TELEGRAM ====================
# Telegram Bot token from @BotFather
TELEGRAM_BOT_TOKEN=1234567890:ABCDefghIJKLmnopQRSTuvwxYZ123456789

# Your Telegram Chat ID for admin notifications (get from @userinfobot)
TELEGRAM_CHAT_ID=123456789

# ==================== PANIC KILL SWITCH (2FA) ====================
# TOTP secret for emergency panic close command
# Generate with: python -c "import pyotp; print(pyotp.random_base32())"
# Add this to your Google Authenticator/Authy app!
PANIC_OTP_SECRET=JBSWY3DPEHPK3PXP

# Comma-separated list of Telegram user IDs authorized to use panic commands
# Get IDs from @userinfobot
PANIC_AUTHORIZED_USERS=123456789,987654321

# ==================== PRODUCTION DOMAIN ====================
# Your production domain with https:// prefix
# For multiple domains, separate with commas (no spaces)
PRODUCTION_DOMAIN=https://yourdomain.com,https://www.yourdomain.com

# Enable HTTPS secure cookies (set to true when SSL is configured)
HTTPS_ENABLED=true

# ==================== DATABASE ====================
# PostgreSQL connection string (REQUIRED for production)
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://brain_capital:your-db-password@db:5432/brain_capital

# Password for PostgreSQL (used by docker-compose)
POSTGRES_PASSWORD=your-secure-database-password

# ==================== REDIS ====================
# Redis URL for task queue and caching
REDIS_URL=redis://redis:6379/0

# ==================== EMAIL (Optional) ====================
# SMTP settings for password recovery emails
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=your-email@gmail.com

# ==================== SSL/HTTPS OPTIONS ====================
# Option 1 (RECOMMENDED): Use a reverse proxy (nginx/apache)
# Configure SSL in nginx and leave these empty

# Option 2: Direct SSL (for development/testing only)
# SSL_CERT_PATH=/path/to/fullchain.pem
# SSL_KEY_PATH=/path/to/privkey.pem
# ==================== GOOGLE OAUTH ====================
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
# Optional override; leave empty to auto-generate callback URL
GOOGLE_OAUTH_REDIRECT_URL=

# ==================== WEBAUTHN / PASSKEYS ====================
WEBAUTHN_RP_ID=yourdomain.com
WEBAUTHN_RP_NAME=MIMIC
WEBAUTHN_ORIGIN=https://yourdomain.com

# ==================== VAPID WEB PUSH (PWA Notifications) ====================
# Generate VAPID keys: python -c "from pywebpush import webpush; from cryptography.hazmat.primitives.asymmetric import ec; from cryptography.hazmat.backends import default_backend; import base64; key = ec.generate_private_key(ec.SECP256R1(), default_backend()); pn = key.public_key().public_numbers(); print('VAPID_PUBLIC_KEY=' + base64.urlsafe_b64encode(b'\\x04' + pn.x.to_bytes(32, 'big') + pn.y.to_bytes(32, 'big')).decode()); print('VAPID_PRIVATE_KEY=' + base64.urlsafe_b64encode(key.private_numbers().private_value.to_bytes(32, 'big')).decode())"
VAPID_PUBLIC_KEY=your-vapid-public-key
VAPID_PRIVATE_KEY=your-vapid-private-key
VAPID_CLAIM_EMAIL=mailto:admin@yourdomain.com

# ==================== TWITTER/X AUTO-POSTING (Optional) ====================
# Create Twitter Developer account: https://developer.twitter.com
# Create App with Read and Write permissions
TWITTER_API_KEY=your-twitter-api-key
TWITTER_API_SECRET=your-twitter-api-secret
TWITTER_ACCESS_TOKEN=your-twitter-access-token
TWITTER_ACCESS_SECRET=your-twitter-access-secret
# Minimum ROI percentage to trigger a tweet (default: 50%)
TWITTER_MIN_ROI_THRESHOLD=50.0
# Site URL for tweet links
SITE_URL=https://yourdomain.com

# ==================== OPENAI / RAG SUPPORT BOT (Optional) ====================
# Sign up at: https://platform.openai.com
OPENAI_API_KEY=sk-your-openai-api-key
# Model settings (defaults shown)
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_CHAT_MODEL=gpt-4o-mini
# RAG configuration
RAG_CONFIDENCE_THRESHOLD=0.7
RAG_CHUNK_SIZE=500
RAG_CHUNK_OVERLAP=50

# ==================== PLISIO CRYPTO PAYMENTS (Optional) ====================
# Sign up at: https://plisio.net
PLISIO_API_KEY=your-plisio-api-key
PLISIO_WEBHOOK_SECRET=your-plisio-webhook-secret

# ==================== GEO-BLOCKING / COMPLIANCE (Optional) ====================
# Download MaxMind GeoLite2-Country.mmdb from:
# https://dev.maxmind.com/geoip/geolite2-free-geolocation-data
GEOIP_DB_PATH=/path/to/GeoLite2-Country.mmdb
# Blocked countries (ISO 3166-1 alpha-2, comma-separated)
BLOCKED_COUNTRIES=US,KP,IR
# Terms of Service version
TOS_VERSION=1.0
# Enable TOS consent requirement
TOS_CONSENT_ENABLED=true

# ==================== SENTRY ERROR TRACKING (Optional) ====================
# Create project at: https://sentry.io
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# Optional: Sentry environment name
SENTRY_ENVIRONMENT=production
# Optional: Traces sample rate (0.0 to 1.0)
SENTRY_TRACES_SAMPLE_RATE=0.1

# ==================== GRAFANA / MONITORING (Optional) ====================
# Used by docker-compose for Grafana admin login
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your-secure-grafana-password
GRAFANA_ROOT_URL=https://grafana.yourdomain.com

# ==================== STARTUP MODE (Optional) ====================
# Set to 'docker' to force Docker mode, or leave empty for auto-detection
# START_MODE=docker